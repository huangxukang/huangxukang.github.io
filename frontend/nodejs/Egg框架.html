<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Egg框架 | 黄旭康的博客</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="shortcut icon" href="/img/huang.png">
    <meta name="description" content="黄旭康的博客">
    <link rel="preload" href="/assets/css/0.styles.9b961cba.css" as="style"><link rel="preload" href="/assets/js/app.93f8e8db.js" as="script"><link rel="preload" href="/assets/js/2.8bff3460.js" as="script"><link rel="preload" href="/assets/js/45.97715772.js" as="script"><link rel="prefetch" href="/assets/js/10.5a943617.js"><link rel="prefetch" href="/assets/js/11.a5a8b097.js"><link rel="prefetch" href="/assets/js/12.bee40716.js"><link rel="prefetch" href="/assets/js/13.7b0441e3.js"><link rel="prefetch" href="/assets/js/14.eaebc7c0.js"><link rel="prefetch" href="/assets/js/15.770feca4.js"><link rel="prefetch" href="/assets/js/16.56b9aeb8.js"><link rel="prefetch" href="/assets/js/17.cfdb715d.js"><link rel="prefetch" href="/assets/js/18.12657a24.js"><link rel="prefetch" href="/assets/js/19.f3bf3fb2.js"><link rel="prefetch" href="/assets/js/20.95141335.js"><link rel="prefetch" href="/assets/js/21.49c9d821.js"><link rel="prefetch" href="/assets/js/22.9955bfcb.js"><link rel="prefetch" href="/assets/js/23.b9077c80.js"><link rel="prefetch" href="/assets/js/24.ef4d714d.js"><link rel="prefetch" href="/assets/js/25.05443566.js"><link rel="prefetch" href="/assets/js/26.3d7370df.js"><link rel="prefetch" href="/assets/js/27.4cb99fd6.js"><link rel="prefetch" href="/assets/js/28.f932fd27.js"><link rel="prefetch" href="/assets/js/29.5aa98133.js"><link rel="prefetch" href="/assets/js/3.a2d73e95.js"><link rel="prefetch" href="/assets/js/30.a32d2195.js"><link rel="prefetch" href="/assets/js/31.5ded0c12.js"><link rel="prefetch" href="/assets/js/32.7f3c828e.js"><link rel="prefetch" href="/assets/js/33.f513837c.js"><link rel="prefetch" href="/assets/js/34.7beb757c.js"><link rel="prefetch" href="/assets/js/35.7b4e5c78.js"><link rel="prefetch" href="/assets/js/36.4b37ce1f.js"><link rel="prefetch" href="/assets/js/37.3cf53c55.js"><link rel="prefetch" href="/assets/js/38.31918003.js"><link rel="prefetch" href="/assets/js/39.05b8fe7d.js"><link rel="prefetch" href="/assets/js/4.c8cc242b.js"><link rel="prefetch" href="/assets/js/40.8a97ff44.js"><link rel="prefetch" href="/assets/js/41.31ab1c86.js"><link rel="prefetch" href="/assets/js/42.682d8b80.js"><link rel="prefetch" href="/assets/js/43.aeae74d4.js"><link rel="prefetch" href="/assets/js/44.4d0a6097.js"><link rel="prefetch" href="/assets/js/46.66055a0a.js"><link rel="prefetch" href="/assets/js/47.e0bc4ed0.js"><link rel="prefetch" href="/assets/js/48.60d7957d.js"><link rel="prefetch" href="/assets/js/49.b21f2728.js"><link rel="prefetch" href="/assets/js/5.e43cbdf3.js"><link rel="prefetch" href="/assets/js/50.c1543a6a.js"><link rel="prefetch" href="/assets/js/6.219cac7c.js"><link rel="prefetch" href="/assets/js/7.9aeaa980.js"><link rel="prefetch" href="/assets/js/8.c5521107.js"><link rel="prefetch" href="/assets/js/9.50b37756.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9b961cba.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">黄旭康的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  FrontEnd
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.softeem.xin/t_blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  杨标的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://47.98.159.95/my_blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  神三元的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://muyiy.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  木易杨前端进阶
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.cxymsg.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端面试与进阶指南
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Link" class="dropdown-title"><span class="title">Link</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.im" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://segmentfault.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  思否
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_34345560/article/details/91457750" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress基本用法
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_42686768/article/details/105181203" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git基本用法
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/huangxukang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  FrontEnd
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.softeem.xin/t_blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  杨标的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://47.98.159.95/my_blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  神三元的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://muyiy.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  木易杨前端进阶
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.cxymsg.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端面试与进阶指南
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Link" class="dropdown-title"><span class="title">Link</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.im" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://segmentfault.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  思否
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_34345560/article/details/91457750" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress基本用法
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_42686768/article/details/105181203" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git基本用法
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/huangxukang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jQuery</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Bootstrap</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>NodeJS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/nodejs/ECMAScript 6.html" class="sidebar-link">ECMAScript 6</a></li><li><a href="/frontend/nodejs/NodeJS异步编程.html" class="sidebar-link">NodeJS异步编程</a></li><li><a href="/frontend/nodejs/NodeJS常用模块.html" class="sidebar-link">NodeJS常用模块</a></li><li><a href="/frontend/nodejs/Express框架.html" class="sidebar-link">Express框架</a></li><li><a href="/frontend/nodejs/Egg框架.html" class="active sidebar-link">Egg框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#安装egg框架" class="sidebar-link">安装Egg框架</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#构建项目架构" class="sidebar-link">构建项目架构</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#编写控制器" class="sidebar-link">编写控制器</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#配置路由映射" class="sidebar-link">配置路由映射</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#配置egg的keys" class="sidebar-link">配置egg的keys</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#配置egg监听地址与端口" class="sidebar-link">配置egg监听地址与端口</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#配置egg视图" class="sidebar-link">配置egg视图</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#配置公开文件夹（静态文件夹）" class="sidebar-link">配置公开文件夹（静态文件夹）</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#egg-mysql操作" class="sidebar-link">egg-mysql操作</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#egg的service层操作" class="sidebar-link">egg的Service层操作</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#baseservice的编写" class="sidebar-link">BaseService的编写</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#egg-mysql详细操作" class="sidebar-link">egg-mysql详细操作</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#egg的middleware编写" class="sidebar-link">egg的middleware编写</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#egg文件上传" class="sidebar-link">egg文件上传</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#egg路由方法封装" class="sidebar-link">egg路由方法封装</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#egg中session" class="sidebar-link">egg中session</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#egg-session实现登录验证" class="sidebar-link">egg-session实现登录验证</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#egg生命周期" class="sidebar-link">egg生命周期</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#request别名" class="sidebar-link">Request别名</a></li><li class="sidebar-sub-header"><a href="/frontend/nodejs/Egg框架.html#response别名" class="sidebar-link">Response别名</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Sass</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="egg框架"><a href="#egg框架" class="header-anchor">#</a> Egg框架</h1> <blockquote><p><strong><code>Egg.js</code> 为企业级框架和应用而生</strong></p></blockquote> <ul><li><p>约定大于配置</p></li> <li><p>完全的模块化低耦合（一个模块或一个插件只干一件事情）</p></li></ul> <h2 id="安装egg框架"><a href="#安装egg框架" class="header-anchor">#</a> 安装Egg框架</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> egg egg-bin
</code></pre></div><p>安装了两个模块，<code>egg</code>框架和<code>egg-bin</code>，<code>egg-bin</code>模块主要是用于启动<code>egg</code>项目</p> <h2 id="构建项目架构"><a href="#构建项目架构" class="header-anchor">#</a> 构建项目架构</h2> <p><code>egg</code>是约定大于配置的，所以要按照约定好的东西来建立目录结构与文件</p> <p><img src="/img/nodejs/Egg-1.png" alt="Egg-1"></p> <p>在<code>package.json</code>里配置<code>egg</code>的启动</p> <p><img src="/img/nodejs/Egg-2.png" alt="Egg-2"></p> <h2 id="编写控制器"><a href="#编写控制器" class="header-anchor">#</a> 编写控制器</h2> <p><code>controller</code>用于存放控制器</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// const Controller = require(&quot;egg&quot;).Controller;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>Controller<span class="token punctuation">}</span> <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;egg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 这里的命名有约束</span>
<span class="token keyword">class</span> <span class="token class-name">DepartmentInfoController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span><span class="token punctuation">{</span>
    <span class="token comment">// 驼峰命名</span>
    <span class="token keyword">async</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body<span class="token operator">=</span><span class="token string">&quot;hello egg&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports<span class="token operator">=</span>DepartmentInfoController<span class="token punctuation">;</span>
</code></pre></div><h2 id="配置路由映射"><a href="#配置路由映射" class="header-anchor">#</a> 配置路由映射</h2> <p><code>app</code>的目录下面创建了<code>router.js</code>文件，主要目的就是实现路由与控制器的映射关系</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">app</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>router<span class="token punctuation">,</span>controller<span class="token punctuation">}</span><span class="token operator">=</span>app<span class="token punctuation">;</span>
    router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/departmentInfo/list&quot;</span><span class="token punctuation">,</span>controller<span class="token punctuation">.</span>departmentInfo<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当所有的东西准备完成后，启动浏览器，仍然会报错</p> <p><img src="/img/nodejs/Egg-3.png" alt="Egg-3"></p> <p>这个错误提示要配置一个<code>keys</code></p> <h2 id="配置egg的keys"><a href="#配置egg的keys" class="header-anchor">#</a> 配置egg的keys</h2> <p>在<code>config</code>的目录下，找到<code>config.default.js</code>文件，进行<code>keys</code>的配置，keys可以随便配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span>keys<span class="token operator">=</span><span class="token string">&quot;huangxukang&quot;</span><span class="token punctuation">;</span> 
</code></pre></div><h2 id="配置egg监听地址与端口"><a href="#配置egg监听地址与端口" class="header-anchor">#</a> 配置egg监听地址与端口</h2> <p><code>egg</code>在配置启动时使用的是<code>7001</code>端口号，主机地址使用的是<code>127.0.0.1</code>，现在可以进行更改</p> <p>在<code>config.default.js</code>里，添加如下配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 配置egg的启动</span>
exports<span class="token punctuation">.</span>cluster<span class="token operator">=</span><span class="token punctuation">{</span>
    listen<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token comment">// 配置监听的主机地址，0.0.0.0代表当前电脑上面所有的IP地埴 </span>
        hostname<span class="token operator">:</span><span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>
        port<span class="token operator">:</span><span class="token number">80</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span><span class="token string">&quot;&quot;</span> <span class="token comment">// 启动路径，设置为空    </span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当重新启动项目后，就可以使用新地址与新端口来访问</p> <h2 id="配置egg视图"><a href="#配置egg视图" class="header-anchor">#</a> 配置egg视图</h2> <p>框架内置 <a href="https://github.com/eggjs/egg-view" target="_blank" rel="noopener noreferrer">egg-view<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>作为模板解决方案，并支持多模板渲染，每个模板引擎都<strong>以插件的方式引入</strong>，但保持渲染的 API 一致</p> <p>可使用以下模板引擎，更多<a href="https://github.com/search?utf8=%E2%9C%93&amp;q=topic%3Aegg-view&amp;type=Repositories&amp;ref=searchresults" target="_blank" rel="noopener noreferrer">查看<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li><a href="https://github.com/eggjs/egg-view-nunjucks" target="_blank" rel="noopener noreferrer">egg-view-nunjucks<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/eggjs/egg-view-react" target="_blank" rel="noopener noreferrer">egg-view-react<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/eggjs/egg-view-vue" target="_blank" rel="noopener noreferrer">egg-view-vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/eggjs/egg-view-ejs" target="_blank" rel="noopener noreferrer">egg-view-ejs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/eggjs/egg-view-handlebars" target="_blank" rel="noopener noreferrer">egg-view-handlebars<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/chrisyip/egg-view-pug" target="_blank" rel="noopener noreferrer">egg-view-pug<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/eggjs/egg-view-xtpl" target="_blank" rel="noopener noreferrer">egg-view-xtpl<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>现在还是使用<code>art-tempalte</code></p> <p><strong>第一步：安装模块</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> egg-view-arttemplate
</code></pre></div><p><strong>第二步：配置插件</strong></p> <p>在<code>config</code>目录下找到<code>plugin.js</code>，去添加如下配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token comment">// 配置视图模板</span>
 exports<span class="token punctuation">.</span>arttemplate<span class="token operator">=</span><span class="token punctuation">{</span>
    enable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token keyword">package</span><span class="token operator">:</span><span class="token string">&quot;egg-view-arttemplate&quot;</span>
 <span class="token punctuation">}</span>
</code></pre></div><p><strong>第三步：配置项目的默认模板</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 配置默认模板引擎</span>
exports<span class="token punctuation">.</span>view<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token comment">// 配置模板的后缀名映射关系</span>
    mapping<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token string">&quot;.html&quot;</span><span class="token operator">:</span><span class="token string">&quot;arttemplate&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>第四步：添加视图文件</strong></p> <p>在<code>view</code>的文件夹下，创建<code>departmentInfo</code>文件夹，然后在里面创建模块的视图</p> <p><strong>第五步：渲染模板</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// const Controller = require(&quot;egg&quot;).Controller;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>Controller<span class="token punctuation">}</span> <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;egg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 这里的命名有约束</span>
<span class="token keyword">class</span> <span class="token class-name">DepartmentInfoController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span><span class="token punctuation">{</span>
    <span class="token comment">// 驼峰命名</span>
    <span class="token keyword">async</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&quot;departmentInfo/list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports<span class="token operator">=</span>DepartmentInfoController<span class="token punctuation">;</span>
</code></pre></div><h2 id="配置公开文件夹（静态文件夹）"><a href="#配置公开文件夹（静态文件夹）" class="header-anchor">#</a> 配置公开文件夹（静态文件夹）</h2> <p><code>egg</code>与<code>express</code>都是<code>MVC</code>的规范，它们的所有的请求都要经过控制器，在<code>express</code>里面，配置公开文件夹（静态文件夹），在<code>egg</code>里面，<code>egg</code>默认把<code>app</code>目录下面的<code>public</code>文件夹公开了</p> <p>如果希望自定义的文件夹也要公开，则需要加载第三方插件<code>egg-static</code></p> <p><strong>第一下：下载模块</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> egg-static
</code></pre></div><p><strong>第二步：配置模块</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 配置程序的静态目录</span>
exports<span class="token punctuation">.</span>static <span class="token operator">=</span> <span class="token punctuation">{</span>
    prefix<span class="token operator">:</span> <span class="token string">&quot;/public/&quot;</span><span class="token punctuation">,</span>
    dir<span class="token operator">:</span> <span class="token punctuation">[</span>
        path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../app/public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            prefix<span class="token operator">:</span><span class="token string">&quot;/uploadImgs/&quot;</span><span class="token punctuation">,</span>
            dir<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../app/uploadImgs&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面配置了两个静态目录 ，一个是<code>public</code>的静态目录，一个是<code>uploadImgs</code>的静态目录</p> <div class="language-http extra-class"><pre class="language-http"><code><span class="token header-name keyword">http:</span>//127.0.0.1/uploadImgs/part2.png
</code></pre></div><p>当打开上面的网址时，就可以直接找到这张图片，不需要经过路由与控制器</p> <h2 id="egg-mysql操作"><a href="#egg-mysql操作" class="header-anchor">#</a> egg-mysql操作</h2> <p><code>egg</code>框架针对不同的数据库有不同的操作模块，以<code>mysql</code>为例</p> <p><strong>第一步：安装模块</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> egg-mysql
</code></pre></div><p><strong>第二步：配置插件</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 配置mysql的用户名与密码</span>
exports<span class="token punctuation">.</span>mysql <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 客户端</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
        host<span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
        port<span class="token operator">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
        user<span class="token operator">:</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">&quot;aaabbb&quot;</span><span class="token punctuation">,</span>
        database<span class="token operator">:</span> <span class="token string">&quot;sms&quot;</span><span class="token punctuation">,</span>
        multipleStatements<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 相当于把DBUtils当成一个属性挂载到了app上面</span>
    app<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    agent<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 默认是false</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="egg的service层操作"><a href="#egg的service层操作" class="header-anchor">#</a> egg的Service层操作</h2> <p><strong>第一步：创建service对象</strong></p> <p>在<code>service</code>目录下创建<code>service</code>文件<code>departmentInfo.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * departmentinfo的数据表service
 */</span>

<span class="token comment">// const Service = require(&quot;egg&quot;).Service;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>Service<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;egg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 构造函数 大写开头</span>
<span class="token keyword">class</span> <span class="token class-name">DepartmentInfoService</span> <span class="token keyword">extends</span> <span class="token class-name">Service</span><span class="token punctuation">{</span>
    <span class="token comment">// 因为数据库的操作是异步的，所以需要等待</span>
    <span class="token comment">// 查询所有</span>
    <span class="token keyword">async</span> <span class="token function">getAllList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// departmentinfo代表的是表或视图</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;departmentinfo&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            where<span class="token operator">:</span><span class="token punctuation">{</span>
                isDel<span class="token operator">:</span><span class="token boolean">false</span>
                <span class="token comment">// did:[1,2,3]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            limit<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
            offset<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
            orders<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;dname&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 查询一个</span>
    <span class="token keyword">async</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span>DepartmentInfoService<span class="token punctuation">;</span>
</code></pre></div><p>在这一层里直接通过<code>app</code>就拿到了数据库操作对象mysql</p> <p><strong>第三步：controller控制器调用</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 这里的命名有约束</span>
<span class="token keyword">class</span> <span class="token class-name">DepartmentInfoController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span><span class="token punctuation">{</span>
    <span class="token comment">// 驼峰命名</span>
    <span class="token keyword">async</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 如果是属性赋值，没事</span>
        <span class="token comment">// this.ctx.response.body=&quot;123123&quot;; </span>
        <span class="token comment">// 通过service 查询所有数据</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>service<span class="token punctuation">.</span>departmentInfo<span class="token punctuation">.</span><span class="token function">getAllList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&quot;departmentInfo/list&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            departmentInfoList<span class="token operator">:</span>result
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这一步里，直接通过控制器对象里的<code>ctx</code>拿到了<code>service</code>层，<code>egg-mysql</code>使用的是一种特殊的操作方式</p> <h2 id="baseservice的编写"><a href="#baseservice的编写" class="header-anchor">#</a> BaseService的编写</h2> <p>与<code>express</code>框架一样，可以把公共的数据库操作方法封装成一个对象，然后让所有的<code>service</code>再继承这个对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * baseService.js
 */</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>
    Service
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;egg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BaseService</span> <span class="token keyword">extends</span> <span class="token class-name">Service</span> <span class="token punctuation">{</span>
    <span class="token comment">// 因为这个baseService继承了egg里面的service</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 把egg框架注入到server里面的参数app以及其它的都传递给父类</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tableName <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取所有数据
     */</span>
    <span class="token keyword">async</span> <span class="token function">getAllList</span><span class="token punctuation">(</span><span class="token parameter">tableName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>tableName<span class="token operator">||</span><span class="token keyword">this</span><span class="token punctuation">.</span>tableName<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            where<span class="token operator">:</span> <span class="token punctuation">{</span>
                isDel<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> BaseService<span class="token punctuation">;</span>
</code></pre></div><p><strong>departmentInfo.js代码</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> BaseService <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./baseService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 构造函数 大写开头</span>
<span class="token keyword">class</span> <span class="token class-name">DepartmentInfoService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseService</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tableName<span class="token operator">=</span><span class="token string">&quot;departmentinfo&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span> BaseService<span class="token punctuation">;</span>
</code></pre></div><h2 id="egg-mysql详细操作"><a href="#egg-mysql详细操作" class="header-anchor">#</a> egg-mysql详细操作</h2> <h3 id="查询"><a href="#查询" class="header-anchor">#</a> 查询</h3> <p>可以直接使用 <code>get</code> 方法或 <code>select</code> 方法获取一条或多条记录，<code>select</code> 方法支持条件查询与结果的定制</p> <ul><li>查询一条记录</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>posts<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token number">12</span> <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>查询全表</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>posts<span class="token punctuation">`</span>
</code></pre></div><ul><li>条件查询和结果定制</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 搜索 post 表  </span>
    where<span class="token operator">:</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'draft'</span><span class="token punctuation">,</span> author<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'author1'</span><span class="token punctuation">,</span> <span class="token string">'author2'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// WHERE 条件  </span>
    columns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'author'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 要查询的表字段  </span>
    orders<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'created_at'</span><span class="token punctuation">,</span><span class="token string">'desc'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span><span class="token string">'desc'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
    <span class="token comment">// 排序方式  </span>
    limit<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 返回数据量  </span>
    offset<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 数据偏移量</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">`</span>author<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>title<span class="token punctuation">`</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>posts<span class="token punctuation">`</span>  <span class="token keyword">WHERE</span> <span class="token punctuation">`</span><span class="token keyword">status</span><span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'draft'</span> <span class="token operator">AND</span> <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">'author1'</span><span class="token punctuation">,</span><span class="token string">'author2'</span><span class="token punctuation">)</span>  <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">`</span>created_at<span class="token punctuation">`</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">DESC</span> <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="直接执行-sql-语句"><a href="#直接执行-sql-语句" class="header-anchor">#</a> 直接执行 sql 语句</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> postId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'update posts set hits = (hits + ?) where id = ?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> postId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> posts <span class="token keyword">set</span> hits <span class="token operator">=</span> <span class="token punctuation">(</span>hits <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="新增操作"><a href="#新增操作" class="header-anchor">#</a> 新增操作</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token comment">/**
  * service新增系别信息
  */</span>
<span class="token keyword">async</span> <span class="token function">addDepartmentInfo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>dname<span class="token punctuation">,</span>manager<span class="token punctuation">,</span>manager_tel<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tableName<span class="token punctuation">,</span><span class="token punctuation">{</span>
        dname<span class="token punctuation">,</span>manager<span class="token punctuation">,</span>manager_tel
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tableName <span class="token punctuation">(</span>dname<span class="token punctuation">,</span>manager<span class="token punctuation">,</span>manager_tel<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>dname<span class="token punctuation">,</span>manager<span class="token punctuation">,</span>manager_tel<span class="token punctuation">)</span>
</code></pre></div><h2 id="egg的middleware编写"><a href="#egg的middleware编写" class="header-anchor">#</a> egg的middleware编写</h2> <p>在<code>express</code>里，使用<code>app.use</code>来加载<strong>中间件</strong>，但是在<code>egg</code>里它的中间件全部放在<code>middleware</code>这个文件夹下，有固定的编写格式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在这里，它要返回一个方法</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>options</code>代表这个中间件在调用时的参数</p> <p><code>app</code>代表<code>egg</code>调用时自动注入的对象</p> <p><code>ctx</code>代表控制器的上下文，可以通过这个对像拿到<code>request</code>,<code>response</code></p> <p><code>next</code>它是一个方法，代表继续拦截以后的操作</p></blockquote> <p>现在就写一个<code>egg.js</code>框架里面必备的一个中间件<code>csrf.js</code>，这个中间件为了防止跨域攻击</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * csrf的中间件（拦截器）
 */</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在这里，它要返回一个方法</span>
    <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果要配置csrf</span>
        ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>csrf <span class="token operator">=</span> ctx<span class="token punctuation">.</span>csrf<span class="token punctuation">;</span>
        <span class="token comment">// 这个ctx.state它会自动根据你的想要的引擎生成一个变量叫_csrf</span>
        <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>写好中间件后，一定要配置中间件， 在<code>config.deafult.js</code> 里启用这个中间件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 配置需要启用的中间件</span>
exports<span class="token punctuation">.</span>middleware<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;csrf&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="egg文件上传"><a href="#egg文件上传" class="header-anchor">#</a> egg文件上传</h2> <ol><li><p>设置表单的<code>enctype=&quot;multipart/form-data&quot;</code></p></li> <li><p>安装<code>egg-multipart</code>模块</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> egg-multipart
</code></pre></div></li> <li><p>配置模块，在<code>config.default.js</code>里面进行相关的配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code></code></pre></div></li></ol> <p>//配置文件上传
exports.multipart={
fileSize:'50mb',
mode:&quot;file&quot;,                 //配置已文件的形式接收
//配置文件的默认存放位置
tmpdir:path.join(__dirname,&quot;../app/uploadImgs&quot;)
}</p> <div class="language- extra-class"><pre class="language-text"><code>
4. 在控制器接收文件

```javascript
this.ctx.request.files
</code></pre></div><p>接收到的是一个数组，数据格式如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span> <span class="token punctuation">{</span> field<span class="token operator">:</span> <span class="token string">'manager_photo'</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'specs_black.png'</span><span class="token punctuation">,</span>
    encoding<span class="token operator">:</span> <span class="token string">'7bit'</span><span class="token punctuation">,</span>
    mime<span class="token operator">:</span> <span class="token string">'image/png'</span><span class="token punctuation">,</span>
    fieldname<span class="token operator">:</span> <span class="token string">'manager_photo'</span><span class="token punctuation">,</span>
    transferEncoding<span class="token operator">:</span> <span class="token string">'7bit'</span><span class="token punctuation">,</span>
    mimeType<span class="token operator">:</span> <span class="token string">'image/png'</span><span class="token punctuation">,</span>
    filepath<span class="token operator">:</span>
     <span class="token string">'D:\\H1904\\1023\\code\\egg_demo\\app\\uploadImgs\\2019\\10\\24\\10\\182940b2-ab6b-4061-8a62-2bf6d7a8e5bb.png'</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
</code></pre></div><h2 id="egg路由方法封装"><a href="#egg路由方法封装" class="header-anchor">#</a> egg路由方法封装</h2> <p>在使用<code>egg.js</code>的过程中，需要在书写完控制器后再进行路由的相关操作，这时可以在路由文件<code>router.js</code>里写一个通用方法，实现路由的加载</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 路由文件
 */</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">app</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>
        router<span class="token punctuation">,</span>
        controller
    <span class="token punctuation">}</span> <span class="token operator">=</span> app<span class="token punctuation">;</span>
    <span class="token comment">// 读控制器文件夹</span>
    <span class="token keyword">let</span> controllerList <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./controller&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历所有的控制器文件    </span>
    controllerList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 拿到控制器的名子</span>
        <span class="token keyword">let</span> controllerName <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 接下来，去拿控制器时面所有的方法</span>
        <span class="token keyword">let</span> _keys <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>controller<span class="token punctuation">[</span>controllerName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 这个属性名不能是sysbol类型，并且是一个方法</span>
        _keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// m就是每一个方法名</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> m<span class="token operator">!=</span><span class="token string">&quot;symbol&quot;</span><span class="token operator">&amp;&amp;</span><span class="token keyword">typeof</span> controller<span class="token punctuation">[</span>controllerName<span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// do开头的是POST，其它的是GET</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;do&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>controllerName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>m<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>controller<span class="token punctuation">[</span>controllerName<span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span><span class="token punctuation">{</span>
                    router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>controllerName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>m<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>controller<span class="token punctuation">[</span>controllerName<span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/departmentInfo/query/:did&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>departmentInfo<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><ul><li>在开发过程当中要约定好，所有的<code>POST</code>请求都要使用<code>do</code>来开头</li> <li>这个方法不能做到路径变量</li></ul></blockquote> <p>完成这个方法的封装后，如果再到控制器里面添加方法，就不用再进行路由文件一一映射添加，它会自动实现映射关系</p> <h2 id="egg中session"><a href="#egg中session" class="header-anchor">#</a> egg中session</h2> <p><strong>第一步：安装模块</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> egg-session
</code></pre></div><p><strong>第二步：配置session</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// plugin.js</span>
exports<span class="token punctuation">.</span>session <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>第三步：使用session</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>userInfo<span class="token operator">=</span>userName<span class="token punctuation">;</span>  <span class="token comment">// session的赋值</span>
<span class="token comment">// ------</span>
 userName<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>userInfo   <span class="token comment">// session的取值</span>
</code></pre></div><h2 id="egg-session实现登录验证"><a href="#egg-session实现登录验证" class="header-anchor">#</a> egg-session实现登录验证</h2> <p>在平时开发中，可以实现<code>session</code>做登录验证，现在来编写一个中间件</p> <p><strong>第一步：创建中间件</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// middleware/loginAuth.js</span>
<span class="token comment">/**
 * 登陆验证的中间件
 */</span>
<span class="token keyword">const</span> appConfig<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../../config/appConfig&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>appConfig<span class="token punctuation">.</span>excludePath<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 如果是需要放行的页面，我直接放行</span>
            <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// 说明已经登陆了</span>
                <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/main/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>第二步：启用中间件</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// config/config.default.js</span>
<span class="token comment">// 配置需要启用的中间件</span>
exports<span class="token punctuation">.</span>middleware<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;csrf&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;loginAuth&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>当用户登录以后就可以实现登录验证</p> <h2 id="egg生命周期"><a href="#egg生命周期" class="header-anchor">#</a> egg生命周期</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 从你启动，到你停止都在这里
 */</span>
<span class="token keyword">class</span> <span class="token class-name">AppBootHook</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>app <span class="token operator">=</span> app<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 配置文件即将加载</span>
    <span class="token function">configWillLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在这个步骤，我们还可以更改配置文件</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我在configWillLoad里面执行了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 此时 config 文件已经被读取并合并，但是还并未生效</span>
        <span class="token comment">// 这是应用层修改配置的最后时机</span>
        <span class="token comment">// 注意：此函数只支持同步调用</span>

        <span class="token comment">// 例如：参数中的密码是加密的，在此处进行解密</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token function">decrypt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 例如：插入一个中间件到框架的 coreMiddleware 之间</span>
        <span class="token keyword">const</span> statusIdx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>coreMiddleware<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>coreMiddleware<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>statusIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'limit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
    <span class="token comment">// 配置文件已经加载</span>
    <span class="token function">configDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
    <span class="token comment">// 文件加载完成</span>
    <span class="token function">didLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 所有的配置已经加载完毕</span>
        <span class="token comment">// 可以用来加载应用自定义的文件，启动自定义的服务</span>

        <span class="token comment">// 例如：创建自定义应用的示例</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>queue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 例如：加载自定义的目录</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>loader<span class="token punctuation">.</span><span class="token function">loadToContext</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'app/tasks'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'tasks'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          fieldClass<span class="token operator">:</span> <span class="token string">'tasksClasses'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 插件启动完毕</span>
    <span class="token function">willReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 所有的插件都已启动完毕，但是应用整体还未 ready</span>
        <span class="token comment">// 可以做一些数据初始化等操作，这些操作成功才会启动应用</span>

        <span class="token comment">// 例如：从数据库加载数据到内存缓存</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>cacheData <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>model<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token constant">QUERY_CACHE_SQL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// worker 准备就绪</span>
    <span class="token function">didReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token comment">// 应用已经启动完毕</span>

   	 	<span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">createAnonymousContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token keyword">await</span> ctx<span class="token punctuation">.</span>service<span class="token punctuation">.</span>Biz<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 应用启动完成</span>
    <span class="token function">serverDidReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// http / https server 已启动，开始接受外部请求</span>
        <span class="token comment">// 此时可以从 app.server 拿到 server 的实例</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'timeout'</span><span class="token punctuation">,</span> <span class="token parameter">socket</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// handle socket timeout</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 应用即将关闭</span>
    <span class="token function">beforeClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我要关闭了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> AppBootHook<span class="token punctuation">;</span>
</code></pre></div><p>框架提供了统一的入口文件（<code>app.js</code>）进行启动过程自定义，这个文件返回一个<code>Boot</code>类，可以通过定义<code>Boot</code>类中的生命周期方法来执行启动应用过程中的初始化工作</p> <p>框架提供了这些 <a href="https://eggjs.org/zh-cn/advanced/loader.html#life-cycles" target="_blank" rel="noopener noreferrer">生命周期函数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>供开发人员处理：</p> <ul><li>配置文件即将加载，这是最后动态修改配置的时机（<code>configWillLoad</code>）</li> <li>配置文件加载完成（<code>configDidLoad</code>）</li> <li>文件加载完成（<code>didLoad</code>）</li> <li>插件启动完毕（<code>willReady</code>）</li> <li>worker 准备就绪（<code>didReady</code>）</li> <li>应用启动完成（<code>serverDidReady</code>）</li> <li>应用即将关闭（<code>beforeClose</code>）</li></ul> <p>可以在 <code>app.js</code> 中定义这个 Boot 类，下面抽取几个在应用开发中常用的生命周期函数来举例：</p> <h2 id="request别名"><a href="#request别名" class="header-anchor">#</a> Request别名</h2> <p>以下访问器和 <a href="https://koa.bootcss.com/#request" target="_blank" rel="noopener noreferrer">Request<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 别名等效：</p> <ul><li><code>ctx.header</code></li> <li><code>ctx.headers</code></li> <li><code>ctx.method</code></li> <li><code>ctx.method=</code></li> <li><code>ctx.url</code></li> <li><code>ctx.url=</code></li> <li><code>ctx.originalUrl</code></li> <li><code>ctx.origin</code></li> <li><code>ctx.href</code></li> <li><code>ctx.path</code></li> <li><code>ctx.path=</code></li> <li><code>ctx.query</code></li> <li><code>ctx.query=</code></li> <li><code>ctx.querystring</code></li> <li><code>ctx.querystring=</code></li> <li><code>ctx.host</code></li> <li><code>ctx.hostname</code></li> <li><code>ctx.fresh</code></li> <li><code>ctx.stale</code></li> <li><code>ctx.socket</code></li> <li><code>ctx.protocol</code></li> <li><code>ctx.secure</code></li> <li><code>ctx.ip</code></li> <li><code>ctx.ips</code></li> <li><code>ctx.subdomains</code></li> <li><code>ctx.is()</code></li> <li><code>ctx.accepts()</code></li> <li><code>ctx.acceptsEncodings()</code></li> <li><code>ctx.acceptsCharsets()</code></li> <li><code>ctx.acceptsLanguages()</code></li> <li><code>ctx.get()</code></li> <li><code>ctx.session</code></li></ul> <h2 id="response别名"><a href="#response别名" class="header-anchor">#</a> Response别名</h2> <p>以下访问器和 <a href="https://koa.bootcss.com/#response" target="_blank" rel="noopener noreferrer">Response<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 别名等效：</p> <ul><li><code>ctx.body</code></li> <li><code>ctx.body=</code></li> <li><code>ctx.status</code></li> <li><code>ctx.status=</code></li> <li><code>ctx.message</code></li> <li><code>ctx.message=</code></li> <li><code>ctx.length=</code></li> <li><code>ctx.length</code></li> <li><code>ctx.type=</code></li> <li><code>ctx.type</code></li> <li><code>ctx.headerSent</code></li> <li><code>ctx.redirect()</code></li> <li><code>ctx.attachment()</code></li> <li><code>ctx.set()</code></li> <li><code>ctx.append()</code></li> <li><code>ctx.remove()</code></li> <li><code>ctx.lastModified=</code></li> <li><code>ctx.etag=</code></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/nodejs/Express框架.html" class="prev">
        Express框架
      </a></span> <span class="next"><a href="/frontend/sass/Sass基础语法.html">
        Sass基础语法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.93f8e8db.js" defer></script><script src="/assets/js/2.8bff3460.js" defer></script><script src="/assets/js/45.97715772.js" defer></script>
  </body>
</html>
